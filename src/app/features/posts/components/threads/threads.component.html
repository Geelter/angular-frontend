<div class="page-wrapper">
  <p-progressSpinner
    class="progress-spinner"
    *ngIf="threadsAreLoading$ | async; else content"></p-progressSpinner>

  <ng-template #content>
    <div class="page-content">
      <p-panel
        [toggleable]="true"
        *ngFor="let thread of threadsForCurrentPage$ | async">
        <ng-template pTemplate="header">
          <span class="font-semibold text-xl">{{ thread.name }}</span>
        </ng-template>
        <p>{{ thread.description }}</p>
        <ng-template pTemplate="footer">
          <p-button
            styleClass="p-button-outlined"
            (onClick)="navigationService.navigateToThreadPosts(thread.id)"
            >Dive in</p-button
          >
        </ng-template>
      </p-panel>
    </div>

    <p-paginator
      *ngIf="threadsPaginationState$ | async as resolvedPaginationState"
      [totalRecords]="resolvedPaginationState.totalEntries"
      [rows]="resolvedPaginationState.pageSize"
      [first]="getPaginatorFirst(resolvedPaginationState)"
      (onPageChange)="onPageChange($event)">
    </p-paginator>
  </ng-template>
</div>
